<div class="users-content dark-grey-box">
  <div class="grey-box new">
    <button class="green-btn round-btn" (click)="showModal('new-user')">Новый пользователь</button>
  </div>
  <div class="grey-box group">
    <label class="mr-15" for="group">Показать группы</label>
    <mat-form-field floatLabel="never">
      <mat-select>
        <mat-option *ngFor="let item of groupsList" [value]="item.id" class="example-item">
          {{item.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- <input class="m-0" type="text" placeholder="Выберите группу" id="group" name="group"> -->
  </div>
  <div class="grey-box access">
    <label for="submit">Доступ группе пользователей <br>к адресной книге и шаблонам:</label>
    <input type="submit" id="submit" name="submit" value="Выбрать группу" (click)="showGroupModal = !showGroupModal">
  </div>
  <div class="row-table">
    <ag-grid-angular
      style="width: 100%; height: 100%; overflow: visible"
      class="ag-theme-alpine"
      [suppressPaginationPanel]="true"
      [debug]="true"
      [suppressScrollOnNewData]="true"
      [rowData]="rowData"
      [columnDefs]="columnDefs"
      [defaultColDef]="defaultColDef"
      [suppressRowClickSelection]="true"
      [rowSelection]="rowSelection"
      [pagination]="true"
      [paginationPageSize]="paginationPageSize"
      (paginationChanged)="onPaginationChanged()"
      (gridReady)="onGridReady($event)"
      (rowClicked)="onRowClicked($event)"
    >
    </ag-grid-angular>
  </div>
  <div class="row-controls">
    <div class="num-of-items">
      <span>На странице: </span>
      <input class="controls-current-number" (input)="onUserPageGrid($event)" type="number" value="10">
    </div>
    <div class="page-controls">
      <span (click)="onBtPrevious()" class="page-prev"></span>
      <span id="current" class="page-current"></span>
      <span class="page-of">из</span>
      <span id="total" class="page-total"></span>
      <span class="page-of">страниц</span>
      <span (click)="onBtNext()" class="page-next"></span>
    </div>
  </div>
</div>

<div id="new-user" class="modal new-user">
  <div class="new-user-content">
    <button class="active-btn circle-btn close-btn" (click)="hideModal('new-user')"></button>
    <h2 class="white-header">Новый пользователь</h2>
    <form [formGroup]="newUserForm" (ngSubmit)="createNewUser()">
      <div class="grey-box">
        <div class="col">
          <label for="agreement">Договор:</label>
          <input type="text" name="agreement" id="agreement" formControlName="agreement">
          <label for="name">Имя:</label>
          <input type="text" name="name" id="name" formControlName="name">
          <label for="email">Email:</label>
          <input type="text" name="email" id="email" formControlName="email">
          <label for="phone">Телефон:</label>
          <input type="text" name="phone" id="phone" formControlName="phone" mask="(00) 000 00 00" prefix="+375" [showMaskTyped]="true">
          <label for="phone2">Телефон 2:</label>
          <input type="text" name="phone2" id="phone2" formControlName="phone2" mask="(00) 000 00 00" prefix="+375" [showMaskTyped]="true">
        </div>
        <div class="col">
          <label for="login">Логин:</label>
          <input type="text" name="login" id="login" formControlName="login">
          <label for="password">Пароль:</label>
          <input type="text" name="password" id="password" formControlName="password">
          <label for="password-repeat">Пароль ( повторить):</label>
          <input type="text" name="password-repeat" id="password-repeat" formControlName="passwordRepeat">
          <label for="group-name">Название группы: </label>
          <mat-form-field floatLabel="never">
            <mat-select formControlName="groupdName">
              <mat-option *ngFor="let item of groupsList" [value]="item.id" class="example-item">
                {{item.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <div class="form-controls">
        <button class="white-btn round-btn" (click)="hideModal('new-user')">Отмена</button>
        <input type="submit" value="Сохранить">
      </div>
    </form>
  </div>
</div>

<div id="add-group" class="modal groups-modal" *ngIf="showGroupModal">
  <div class="row grey-box">
    <h1 class="grey-header">Добавить группу</h1>
    <form [formGroup]="groupForm">
      <input type="text" formControlName="groupName">
      <div class="checkbox-block">
        <input class="checkbox-block-item" type="checkbox" name="new-book" id="new-book" formControlName="book">
        <span class="checkbox-block-icon"></span>
      </div>
      <label for="new-book">Адрессная книга</label>
      <div class="checkbox-block">
        <input class="checkbox-block-item" type="checkbox" name="new-template" id="new-template" formControlName="template">
        <span class="checkbox-block-icon"></span>
      </div>
      <label for="new-template">Шаблоны</label>
      <input type="submit" value="Добавить" (click)="updateGroups()">
    </form>
    <div *ngIf="groupsList.length > 0" class="row groups">
      <p>Выберите к какой группе пользователей доступны данные адресной книги и шаблонов</p>
    </div>
    <div *ngIf="groupsList.length === 0" class="row groups">
      <p>Список групп пуст</p>
    </div>
    <div *ngIf="groupsList.length > 0" class="row groups groups-content">
      <div *ngFor="let item of groupsList">
        <p>{{item.name}}</p>
        <div class="checkbox-block">
          <input class="checkbox-block-item" type="checkbox" name="new-book-{{item.id}}" id="new-book-{{item.id}}" formControlName="book" [checked]="item.addressBookAccess">
          <span class="checkbox-block-icon"></span>
        </div>
        <label for="new-book">Адрессная книга</label>
        <div class="checkbox-block">
          <input class="checkbox-block-item" type="checkbox" name="new-template-{{item.id}}" id="new-template-{{item.id}}" formControlName="template" [checked]="item.templateAcces">
          <span class="checkbox-block-icon"></span>
        </div>
        <label for="new-template">Шаблоны</label>
      </div>
    </div>
  </div>
</div>
